pipeline{
  agent any
  environment {
  DOCKER_TAG = getVersion()
}
 stage{
  stage('SCM checkout'){
    steps{
    git 'https://github.com/ravi2krishna/JavaCalculator.git'
         }
      }
    stage('Compile package'){
     steps{
     sh  'mvn clean package'
          }
      }     
    stage('Docker image'){
      steps{
      sh  'docker build -t devendhar10/JavaCal:0.1'
           }
      }
   }
}   
 def getVersion(){
     def commitHash = sh label: '', returnStdout: true, script: 'git rev-parse --short HEAD'
     return commitHash
}    
